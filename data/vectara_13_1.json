{"text":"Search API Definition Query Request Body and Response Query Definition Corpus Key Definition REST Example gRPC Example Advanced Scenarios Retrieval Augmented Generation Summarization Grounded in Data Chat Conversation Located within the Summary Query API Endpoint Address Query Request Headers Query Request Query Service Query Request Search Multiple Corpora Corpus Key Summarization Request Example ResponseSet Attribute Batch Query and Response Search a Single Corpus Example Search Multiple Corpora Example The Search endpoint lets you perform a query while defining its parametersthat specify the query text pagination details metadata filters and othersettings that enable application builders to tailor their queries to specificuse cases After you index data into one or more corpora you can run queriesand display the results This page provides a detailed reference for howto run queries and also describes some of Vectara s capabilities in metadatafiltering reranking Retrieval Augmented Generation RAG and hybrid search Check out our interactive API Playground that lets you experiment with this REST endpoint to manage your corpus details The Query request body specifies different parameters that ask questions aboutthe data within corpora The Query request requires the following parameters The query response message encapsulates a single query result It is a subdocumentprovided at indexing time The text is the subdocument text the scoreindicates how well the text answers the query higher scores are better The metadata list holds any subdocument level metadata that was stored withthe item at indexing time The corpus_key indicates which corpus the resultcame from recall that a single query can execute against multiple corpora Finally the document_index points at a specific document within theenclosing response set s document array This is useful for retrieving thedocument id and document level metadata A single query consists of a query which is specified in plain text Forexample Where can I buy the latest iPhone Optionally the querycontext provides additional information that the system may use to refine theresults For example The Apple store near my house is closed due to Covid The start field controls the starting position within the list of results while num_results dictates how many results are returned Thus settingstart 5 and num_results 20 would return twenty results beginning at positionfive These fields are mainly used to provide pagination The corpusKey specifies a list of corpora against which to run thequery While it s most often the case that a query is run against a singlecorpus it s sometimes useful to run against several in parallel Finally the reranking configuration enables reranking of results tofurther increase relevance in certain scenarios For details about our Englishcross attentional Scale only and Maximal Marginal Relevance MMR rerankers see Reranking The corpusKey specifies the ID of the corpus being searched The metadata_filter allowsspecifying a predicate expression that restricts the search to a part of thecorpus The filter is written in a simplified SQL dialect and can referencemetadata that was marked as filterable during corpuscreation See the Filter Expressions Overview for adescription of their syntax and Corpus Administration to learn howreferenceable metadata is specified during corpus creation By default Vectara only uses its neural semantic retrieval model and does not attempt to use keyword matching To enable hybrid search with amix of both keyword and neural results edit the lambda value If the corpus specifies custom dimensions Scale only weights can beassigned to each dimension as well Finally it s possible to override the semantic interpretation of the querystring Usually the default settings for the corpus are sufficient In moreadvanced scenarios it s desirable to force it to be treated as a query or more rarely as a response To use Retrieval Augmented Generation RAG which Vectara also refers to as Grounded Generation our groundbreaking way of producing generativesummaries on top of your own data you can submit a SummarizationRequest alongside your query This produces a summary that attempts to answer the end user s question citing the results as references For more information read about Retrieval Augmented Generation The summary within the query can also contain a conversation from Vectara Chat whichincludes a conversationId You enable Vectara Chat by setting the store value to true To interact with the Query service via REST calls you need the followingheaders The Query request body specifies different parameters that ask questions aboutthe data within corpora The Query request requires the following parameters You can find the full Query gRPC definition at serving proto Fundamentally the system accepts a query and returns a response which containsa list of results However for efficiency one or more queries can be batchedinto a single request The request provides several fields and nested messages that configure thequery its context and how the results should be processed and presented The query contains the search terms that the system needs to match againstthe data Then ContextConfig specifies the amount of text or number ofsentences before and after the result snippet The corpus_key allows the query to be executed across multiple corpora The CorpusKey identifies a specific corpus or corpora to include in the query Specifying the customer_id is optional since it defaults to thecustomer attached to the gRPC request The full Query definition provides the detailed summary request When Vectara respondswith the list of results that most semantically answer the user it will alsothen produce a summary of the results with its sources cited For more detailson Retrieval Augmented Generation have a look at thechatbots and grounded generation overview The summary comes back in a format where the text contains a summary of therelevant results to the given search with those relevant results included ascited sources Vectara cites these by number format For example if the 1st result is in the summary it is cited as 1 The response set groups a list of responses sorted in order of score togetherwith a list of statuses and enclosing documents Since it s possible forseveral results to come from the same document the length of the document listmay be less than the length of the response list Attribute represents a named piece of metadata Both the name and itsvalue are string typed The batch query request and response messages simply aggregate severalindividual queries and response sets respectively The response sets will matchthe queries in both number and order For example the third response set inthe batch response will correspond with the third query in the batch request There are situations where searching multiple corpora simultaneously can bebeneficial To do this effectively you need two things The query body modification that s necessary is t","link":"https://docs.vectara.com//docs/api-reference/search-apis/search"}