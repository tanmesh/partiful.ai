{"text":"Controllable Agents for RAG Setup Data Setup Agent Run Some Queries Setup Human In the Loop Chat Download Data Load data Build indices query engines tools Out of the box Test Step Wise Execution  Getting Started Use Cases Understanding Optimizing Module Guides API Reference Community Contributing Changes  Adding agentic capabilities on top of your RAG pipeline can allow you to reason over much more complex questions But a big pain point for agents is the lack of steerability transparency An agent may tackle a user query through chain of thought planning which requires repeated calls to an LLM During this process it can be hard to inspect what s going on or stop correct execution in the middle This notebook shows you how to use our brand new lower level agent API which allows controllable step wise execution on top of a RAG pipeline We showcase this over Wikipedia documents Here we load a simple dataset of different cities from Wikipedia In this section we define our tools and setup the agent We now demonstrate the capabilities of our step wise agent framework We show how it can handle complex queries both e2e as well as step by step We can then show how we can steer the outputs Calling chat will attempt to run the task end to end and we notice that it only ends up calling one tool The end to end chat didn t work Let s try to break it down step by step and inject our own feedback if things are going wrong This returns a Task object which contains the input additional state in extra_state and other fields Now let s try executing a single step of this task We run into the same issue The query finished even though we haven t analyzed the docs yet Can we add a user input Since the steps look good we are now ready to call finalize_response get back our response This will also commit the task execution to the memory object present in our agent_runner We can inspect it With these capabilities it s easy to setup human in the loop or LLM in the loop feedback when interacting with an agent especially for long running tasks We setup a double loop one for the task the user chatting with an agent and the other to control the intermediate executions","link":"https://docs.llamaindex.ai/en/stable/examples/agent/agent_runner/agent_runner_rag_controllable.html"}